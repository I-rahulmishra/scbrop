const addUserInput = (data: any) => {
  console.log("Selected Option:", data);

  if (data.CODE_VALUE === "9999") {
    console.log("Others option selected, updating state...");
    const stageComponents = dispatch(
      getFields(stageSelector, null, "name_of_employer_other")
    );
    setField(stageComponents);

    const otherVal = {
      CODE_DESC: "Others",
      CODE_VALUE: "9999",
    };

    setSelectedValue([otherVal]); // Ensure state updates  

    // ✅ Immediately call `handleCallback` to notify the parent  
    props.handleCallback(props.data, "9999");  

    // ✅ Dispatch state update  
    dispatch(
      isFieldUpdate(props, "9999", props.data.logical_field_name)
    );
  } else {
    console.log("Normal option selected, updating state...");
    setField([]);
    setSelectedValue([data]);

    // ✅ Immediately call `handleCallback`  
    props.handleCallback(props.data, data.CODE_VALUE);

    // ✅ Dispatch state update  
    dispatch(
      isFieldUpdate(props, data.CODE_VALUE, props.data.logical_field_name)
    );
  }

  hide(false);
  setShowOption(false);

  dispatch(
    ValueUpdateAction.getChangeUpdate({
      id: stageSelector[0].stageId,
      changes: true,
    })
  );
};
